<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Groupes de sÃ©curitÃ© pour le module Ã©lÃ¨ves enhanced -->
    
    <!-- CatÃ©gorie principale -->
    <record id="module_category_student_enhanced" model="ir.module.category">
        <field name="name">Gestion Ã‰lÃ¨ves AvancÃ©e</field>
        <field name="description">Gestion complÃ¨te des Ã©lÃ¨ves avec fonctionnalitÃ©s avancÃ©es</field>
        <field name="sequence">10</field>
    </record>

    <!-- Groupe: Utilisateur de base -->
    <record id="group_student_enhanced_user" model="res.groups">
        <field name="name">ğŸ‘ï¸ Consultation Ã‰lÃ¨ves</field>
        <field name="category_id" ref="module_category_student_enhanced"/>
        <field name="comment">Peut consulter les informations de base des Ã©lÃ¨ves</field>
    </record>

    <!-- Groupe: Enseignant -->
    <record id="group_student_enhanced_teacher" model="res.groups">
        <field name="name">ğŸ‘¨â€ğŸ« Enseignant</field>
        <field name="category_id" ref="module_category_student_enhanced"/>
        <field name="implied_ids" eval="[(4, ref('group_student_enhanced_user'))]"/>
        <field name="comment">Peut consulter et ajouter des observations comportementales</field>
    </record>

    <!-- Groupe: Personnel MÃ©dical -->
    <record id="group_student_enhanced_medical" model="res.groups">
        <field name="name">ğŸ¥ Personnel MÃ©dical</field>
        <field name="category_id" ref="module_category_student_enhanced"/>
        <field name="implied_ids" eval="[(4, ref('group_student_enhanced_user'))]"/>
        <field name="comment">AccÃ¨s complet aux informations mÃ©dicales des Ã©lÃ¨ves</field>
    </record>

    <!-- Groupe: Direction -->
    <record id="group_student_enhanced_manager" model="res.groups">
        <field name="name">ğŸ‘¨â€ğŸ’¼ Direction</field>
        <field name="category_id" ref="module_category_student_enhanced"/>
        <field name="implied_ids" eval="[(4, ref('group_student_enhanced_teacher')), (4, ref('group_student_enhanced_medical'))]"/>
        <field name="comment">AccÃ¨s complet Ã  toutes les fonctionnalitÃ©s</field>
    </record>

    <!-- RÃ¨gles de sÃ©curitÃ© -->
    
    <!-- RÃ¨gles pour student.behavior.record -->
    <record model="ir.rule" id="student_behavior_record_user_rule">
        <field name="name">AccÃ¨s aux enregistrements comportementaux (utilisateur)</field>
        <field name="model_id" ref="model_student_behavior_record"/>
        <field name="groups" eval="[(4, ref('group_student_enhanced_user'))]"/>
        <field name="domain_force">[('student_id.user_id', '=', user.id)]</field>
    </record>

    <record model="ir.rule" id="student_behavior_record_teacher_rule">
        <field name="name">AccÃ¨s aux enregistrements comportementaux (enseignant)</field>
        <field name="model_id" ref="model_student_behavior_record"/>
        <field name="groups" eval="[(4, ref('group_student_enhanced_teacher'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>

    <!-- RÃ¨gles pour student.medical.info -->
    <record model="ir.rule" id="student_medical_info_user_rule">
        <field name="name">AccÃ¨s aux informations mÃ©dicales (utilisateur)</field>
        <field name="model_id" ref="model_student_medical_info"/>
        <field name="groups" eval="[(4, ref('group_student_enhanced_user'))]"/>
        <field name="domain_force">[('student_id.user_id', '=', user.id)]</field>
    </record>

    <record model="ir.rule" id="student_medical_info_medical_rule">
        <field name="name">AccÃ¨s aux informations mÃ©dicales (personnel mÃ©dical)</field>
        <field name="model_id" ref="model_student_medical_info"/>
        <field name="groups" eval="[(4, ref('group_student_enhanced_medical'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>

</odoo>
